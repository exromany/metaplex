(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{71943:function(e,t,n){"use strict";n.d(t,{q:function(){return x}});var r=n(92847),i=n.n(r),a=n(76588),s=n(71800),o=n(69819),u=n(181),c=n(13550),l=n.n(c),p=o.actions.createTokenAccount,f=o.actions.activateVault,d=o.actions.combineVault,h=o.models.approve;function x(e,t,n,r,i,a,s,o){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)(i().mark((function e(t,n,r,a,o,c,x,b){var y,v,g,k,m,w;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(u.AccountLayout.span);case 2:return y=e.sent,v=[],g=[],e.next=7,f(new(l())(0),r,a,o,n.publicKey,g);case 7:return k=p(g,n.publicKey,y,a,n.publicKey,v),m=p(g,n.publicKey,y,x,n.publicKey,v),w=s.Keypair.generate(),h(g,[],m,n.publicKey,0,!1,void 0,w),h(g,[],k,n.publicKey,0,!1,void 0,w),v.push(w),e.next=15,d(r,k,m,a,o,c,n.publicKey,n.publicKey,w.publicKey,b,g);case 15:return e.abrupt("return",{instructions:g,signers:v});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},74996:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(92847),i=n.n(r),a=n(76588),s=n(69819);function o(e,t,n){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)(i().mark((function e(t,n,r){var a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],o=[],e.next=4,(0,s.signMetadata)(r,n.publicKey,o);case 4:return e.next=6,(0,s.sendTransactionWithRetry)(t,n,o,a,"single");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},32554:function(e,t,n){"use strict";n.d(t,{W:function(){return v}});var r=n(32113),i=n(92847),a=n.n(i),s=n(76588),o=n(69819),u=n(86171),c=n(71800),l=n(83871),p=n(35551),f=n(48834).Buffer;function d(e,t,n,r,i,a,s,o,u,c,l,p,f,d){return h.apply(this,arguments)}function h(){return(h=(0,s.Z)(a().mark((function e(t,n,r,i,s,u,d,h,x,b,y,v,g,k){var m,w,j,B,Z;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=(0,o.programIds)(),w=m.store){e.next=4;break}throw new Error("Store not initialized");case 4:return j=new p.AT({winningConfigIndex:y,winningConfigItemIndex:v,creatorIndex:g}),B=f.from((0,l.serialize)(p.Yi,j)),e.t0={pubkey:t,isSigner:!1,isWritable:!0},e.t1={pubkey:n,isSigner:!1,isWritable:!0},e.t2={pubkey:r,isSigner:!1,isWritable:!0},e.next=11,(0,p.Ek)(r,y,v,g,u,b);case 11:e.t3=e.sent,e.t4={pubkey:e.t3,isSigner:!1,isWritable:!0},e.t5={pubkey:x,isSigner:!0,isWritable:!1},e.t6={pubkey:i,isSigner:!1,isWritable:!1},e.t7={pubkey:s||c.SystemProgram.programId,isSigner:!1,isWritable:!1},e.t8={pubkey:u,isSigner:!1,isWritable:!1},e.t9={pubkey:w,isSigner:!1,isWritable:!1},e.t10={pubkey:d,isSigner:!1,isWritable:!1},e.t11={pubkey:h,isSigner:!1,isWritable:!1},e.t12={pubkey:m.token,isSigner:!1,isWritable:!1},e.t13={pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},e.t14={pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},Z=[e.t0,e.t1,e.t2,e.t4,e.t5,e.t6,e.t7,e.t8,e.t9,e.t10,e.t11,e.t12,e.t13,e.t14],k.push(new c.TransactionInstruction({keys:Z,programId:m.metaplex,data:B}));case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=n(39975),b=n(12323),y=10;function v(e,t,n,r,i,a){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)(a().mark((function e(t,n,r,i,s,u){var c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.auction.info.ended()||r.auction.info.state===o.AuctionState.Ended){e.next=7;break}return c=[],l=[],e.next=5,(0,b.z)(t,n,s,r,u,0,l,c);case 5:return e.next=7,(0,o.sendTransactionWithRetry)(t,n,l[0],c[0]);case 7:return e.next=9,w(t,n,r,i);case 9:return e.next=11,k(t,n,r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)(a().mark((function e(t,n,i){var s,u,c,l,p,f,h,b,v,g,k,m,w,j,B,Z,S,A,M,I,W,C,P,T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,o.programIds)(),u=[],c=[],l=[],p=[],f=[],h=[],b={},v=[].concat((0,r.Z)(i.items),(0,r.Z)(i.participationItem?[[i.participationItem]]:[])),g=0;case 10:if(!(g<v.length)){e.next=43;break}k=v[g],m=0;case 13:if(!(m<k.length)){e.next=40;break}w=k[m],j=w.metadata.info.data.creators,B=!(null===j||void 0===j||!j.map((function(e){return e.address})).find((function(e){return e.toBase58()===i.auctionManager.info.authority.toBase58()}))),Z=[].concat((0,r.Z)(j?j.map((function(e){return e.address})):[]),[i.auctionManager.info.authority]),S=0;case 19:if(!(S<Z.length)){e.next=37;break}return e.next=22,(0,o.findProgramAddress)([Z[S].toBuffer(),s.token.toBuffer(),x.bx.toBuffer()],s.associatedToken);case 22:return M=e.sent[0],e.next=25,t.getAccountInfo(M);case 25:return I=e.sent,console.log("Existing ata?",I),I||b[M.toBase58()]||(0,o.createAssociatedTokenAccountInstruction)(h,M,n.publicKey,Z[S],x.bx),b[M.toBase58()]=!0,W=j?j.map((function(e){return e.address.toBase58()})).indexOf(Z[S].toBase58()):null,e.next=32,d(i.auctionManager.info.acceptPayment,M,i.auctionManager.pubkey,w.metadata.pubkey,null===(A=w.masterEdition)||void 0===A?void 0:A.pubkey,w.safetyDeposit.pubkey,w.safetyDeposit.info.vault,i.auction.pubkey,n.publicKey,Z[S],w===i.participationItem?null:g,w===i.participationItem?null:m,-1===W||null===W||B&&S===Z.length-1?null:W,h);case 32:h.length>=7&&(l.push(f),p.push(h),f=[],h=[]),p.length===y&&(u.push(l),c.push(p),l=[],p=[]);case 34:S++,e.next=19;break;case 37:m++,e.next=13;break;case 40:g++,e.next=10;break;case 43:h.length<7&&h.length>0&&(l.push(f),p.push(h)),p.length<=y&&p.length>0&&(u.push(l),c.push(p)),C=0;case 46:if(!(C<c.length)){e.next=59;break}if(P=c[C],T=u[C],!(P.length>=2)){e.next=54;break}return e.next=52,(0,o.sendTransactions)(t,n,P,T,o.SequenceType.StopOnFailure,"single");case 52:e.next=56;break;case 54:return e.next=56,(0,o.sendTransactionWithRetry)(t,n,P[0],T[0],"single");case 56:C++,e.next=46;break;case 59:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,n,r){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)(a().mark((function e(t,n,r,i){var s,c,l,p,f,d,h,x,b,v,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],c=[],l=[],p=[],f=[],d=[],h=0;case 7:if(!(h<i.length)){e.next=17;break}return x=i[h],console.log("Claiming",x.info.bidderAct.toBase58()),e.next=12,(0,u.G)(r.auctionManager.info.acceptPayment,x.info.bidderAct,x.info.bidderPot,r.vault.pubkey,r.auction.info.tokenMint,d);case 12:6===d.length&&(l.push(f),p.push(d),f=[],d=[]),p.length===y&&(s.push(l),c.push(p),l=[],p=[]);case 14:h++,e.next=7;break;case 17:d.length<6&&d.length>0&&(l.push(f),p.push(d)),p.length<=y&&p.length>0&&(s.push(l),c.push(p)),console.log("Instructions",c),b=0;case 21:if(!(b<c.length)){e.next=36;break}if(v=c[b],g=s[b],console.log("Running batch",b),!(v.length>=2)){e.next=30;break}return e.next=28,(0,o.sendTransactions)(t,n,v,g,o.SequenceType.StopOnFailure,"single");case 28:e.next=32;break;case 30:return e.next=32,(0,o.sendTransactionWithRetry)(t,n,v[0],g[0],"single");case 32:console.log("Done");case 33:b++,e.next=21;break;case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},65946:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var r=n(92847),i=n.n(r),a=n(76588),s=n(35551),o=n(69819);function u(e,t,n){return c.apply(this,arguments)}function c(){return(c=(0,a.Z)(i().mark((function e(t,n,r){var a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],u=[],e.next=5,(0,s.ew)(r.vault.pubkey,r.auctionManager.info.authority,u);case 5:return e.next=7,(0,o.sendTransactionWithRetry)(t,n,u,a);case 7:(0,o.notify)({message:"Auction started",type:"success"}),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),(0,o.notify)({message:"Transaction failed...",description:"Failed to start the auction",type:"error"}),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}},67905:function(e,t,n){"use strict";n.d(t,{Im:function(){return o},DI:function(){return u}});var r=n(52322),i=n(2784),a=n(37275),s=i.createContext(null),o=function(e){var t=e.children,n=void 0===t?null:t,o=(0,i.useRef)(),u=(0,i.useRef)(),c=(0,i.useMemo)((function(){return function(){var e;u.current&&o.current&&(o.current.style.visibility="visible",null===(e=u.current({particleCount:400,spread:160,origin:{y:.3}}))||void 0===e||e.finally((function(){o.current&&(o.current.style.visibility="hidden")})))}}),[]);(0,i.useEffect)((function(){o.current&&!u.current&&(o.current.style.visibility="hidden",u.current=a.Z.create(o.current,{resize:!0,useWorker:!0}))}),[]);return(0,r.jsxs)(s.Provider,{value:{dropConfetti:c},children:[(0,r.jsx)("canvas",{ref:o,style:{width:"100vw",height:"100vh",position:"absolute",zIndex:1,top:0,left:0}}),n]})},u=function(){var e=c().dropConfetti;return(0,i.useEffect)((function(){e()}),[e]),(0,r.jsx)(r.Fragment,{})},c=function(){return(0,i.useContext)(s)}},96642:function(e,t,n){"use strict";n.d(t,{ZP:function(){return s}});var r=n(10722),i=n(2784);n(71800),n(13550),n(83742),n(48834).Buffer;function a(){var e=[window.innerWidth,window.innerHeight],t=(0,r.Z)(e,2);return{width:t[0],height:t[1]}}function s(){var e=(0,i.useState)(a()),t=e[0],n=e[1];return(0,i.useEffect)((function(){function e(){n(a())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}},70936:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return be}});var r=n(52322),i=n(69819),a=n(39779),s=n(45719),o=n(89857),u=n(67905),c=n(2784),l=n(37488),p=n(39975),f=n(39097),d=n(24832),h=n(69123),x=n(75948),b=n(32113),y=n(77243),v=n(92847),g=n.n(v),k=n(76588),m=n(43939),w=n(81954),j=n(64529),B=n(42150),Z=n(71800),S=n(27755),A=n(32431),M=n(65689),I=n(181);function W(e,t,n){return C.apply(this,arguments)}function C(){return(C=(0,k.Z)(g().mark((function e(t,n,r){var a,s,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.utils.programIds(),s=[],o=[I.Token.createCloseAccountInstruction(a.token,r,n.publicKey,n.publicKey,[])],e.next=5,(0,i.sendTransactionWithRetry)(t,n,o,s,"single");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=n(35551),T=n(83871),E=n(48834).Buffer;function K(e,t,n,r,i){return N.apply(this,arguments)}function N(){return(N=(0,k.Z)(g().mark((function e(t,n,r,a,s){var o,u,c,l,p;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,i.programIds)(),u=o.store){e.next=4;break}throw new Error("Store not initialized");case 4:c=new P.bp,l=E.from((0,T.serialize)(P.Yi,c)),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:o.auction,isSigner:!1,isWritable:!1},{pubkey:Z.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}],s.push(new Z.TransactionInstruction({keys:p,programId:o.metaplex,data:l}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=n(71125);function O(e,t,n,r){return F.apply(this,arguments)}function F(){return(F=(0,k.Z)(g().mark((function e(t,n,r,a){var s,o,u,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=[],o=[],r.auctionManager.info.state.status!==P.f5.Initialized){e.next=15;break}if(u=[],c=[],!r.auction.info.authority.equals(n.publicKey)){e.next=8;break}return e.next=8,(0,i.setAuctionAuthority)(r.auction.pubkey,n.publicKey,r.auctionManager.pubkey,c);case 8:if(!r.vault.info.authority.equals(n.publicKey)){e.next=11;break}return e.next=11,(0,i.setVaultAuthority)(r.vault.pubkey,n.publicKey,r.auctionManager.pubkey,c);case 11:return e.next=13,K(r.auctionManager.pubkey,r.auction.pubkey,n.publicKey,r.vault.pubkey,c);case 13:s.push(u),o.push(c);case 15:return e.next=17,(0,R.b)(t,n,r,a,[],{},{},s,o);case 17:return e.next=19,(0,i.sendTransactionsWithManualRetry)(t,n,o,s);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=n(74996),D=n(13550),Y=n.n(D),L=n(71943);function q(e,t,n,r){return V.apply(this,arguments)}function V(){return(V=(0,k.Z)(g().mark((function e(t,n,r,a){var s,o,u,c,l,p,f,d,h,x,b,y,v,k,m,w,j,B,Z,S;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=0,o=(0,i.programIds)(),u=[],c=[],l=[],p=[],r.info.state!==i.VaultState.Inactive){e.next=20;break}return console.log("Vault is inactive, combining"),e.next=10,t.getAccountInfo(r.info.pricingLookupAddress);case 10:if(!(f=e.sent)){e.next=20;break}return d=(0,i.decodeExternalPriceAccount)(f.data),e.next=15,(0,L.q)(t,n,r.pubkey,r.info.fractionMint,r.info.fractionTreasury,r.info.redeemTreasury,d.priceMint,r.info.pricingLookupAddress);case 15:h=e.sent,x=h.instructions,b=h.signers,u.push(b),c.push(x);case 20:if(y=r.pubkey.toBase58(),v=[],k=a[y+"-0"])for(v.push(k),m=1;k;)(k=a[y+"-"+m.toString()])&&v.push(k),m++;console.log("Found boxes",v),w=0;case 26:if(!(w<v.length)){e.next=46;break}return j=v[w],e.next=30,(0,i.findProgramAddress)([n.publicKey.toBuffer(),o.token.toBuffer(),j.info.tokenMint.toBuffer()],o.associatedToken);case 30:return B=e.sent[0],e.next=33,t.getAccountInfo(B);case 33:return Z=e.sent,console.log("Existing ata?",Z),Z||(0,i.createAssociatedTokenAccountInstruction)(p,B,n.publicKey,n.publicKey,j.info.tokenMint),e.next=38,t.getTokenAccountBalance(j.info.store);case 38:return S=e.sent,e.next=41,(0,i.withdrawTokenFromSafetyDepositBox)(new(Y())(S.value.uiAmount||1),B,j.pubkey,j.info.store,r.pubkey,r.info.fractionMint,r.info.authority,p);case 41:1===s&&(u.push(l),c.push(p),s=0,l=[],p=[]),s++;case 43:w++,e.next=26;break;case 46:return c[c.length-1]!==p&&(u.push(l),c.push(p)),e.next=49,(0,i.sendTransactionsWithManualRetry)(t,n,c,u);case 49:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U,_=n(32554),G=n(65946),Q=n(57836);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t=e.id,n=e.action,i=e.onFinish,a=e.icon,s=(0,c.useState)(U.NotRunning),o=s[0],u=s[1];(0,c.useMemo)((function(){return u(U.NotRunning)}),[t]);var l,p=function(){var e=(0,k.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(U.Running);case 2:return e.next=4,n();case 4:if(!e.sent){e.next=11;break}return e.next=8,u(U.Success);case 8:setTimeout((function(){return i?i():null}),2e3),e.next=13;break;case 11:return e.next=13,u(U.Failed);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();switch(o){case U.NotRunning:l=(0,r.jsx)("span",{className:"hover-button",onClick:p,children:a});break;case U.Failed:l=(0,r.jsx)("span",{className:"hover-button",onClick:p,children:(0,r.jsx)(m.Z,{})});break;case U.Running:l=(0,r.jsx)(w.Z,{});break;case U.Success:l=(0,r.jsx)(j.Z,{twoToneColor:"#52c41a"})}return l}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=(0,k.Z)(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,i.programIds)(),null!==t&&void 0!==t&&t.publicKey){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,Z.PublicKey.findProgramAddress([t.publicKey.toBuffer(),n.token.toBuffer(),p.bx.toBuffer()],n.associatedToken);case 5:return e.abrupt("return",e.sent[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.NotRunning=0]="NotRunning",e[e.Running=1]="Running",e[e.Success=2]="Success",e[e.Failed=3]="Failed"}(U||(U={}));var te={};function ne(){var e,t=(0,s.jq)(),n=t.metadata,a=t.whitelistedCreatorsByCreator,o=t.store,u=t.vaults,l=t.safetyDepositBoxesByVaultAndIndex,p=(0,Q.xE)(Q.nM.Defective),d=(0,Q.xE)(Q.nM.Upcoming),h=(0,i.useConnection)(),x=(0,i.useWallet)().wallet,v=(0,i.useUserAccounts)().accountByMint,m=[],w=(null===x||void 0===x||null===(e=x.publicKey)||void 0===e?void 0:e.toBase58())||"";!function(e){var t=e.connection,n=e.wallet,r=e.notifications,i=(0,c.useState)(!1),a=i[0],s=i[1],o=function(){var e=(0,k.Z)(g().mark((function e(){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(n);case 2:if(!(r=e.sent)){e.next=13;break}return e.prev=4,e.next=7,t.getTokenAccountBalance(r);case 7:(i=e.sent)&&i.value.uiAmount&&s(!0),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:setTimeout(o,6e4);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){o()}),[]),a&&r.push({id:"unsettled",title:"Unsettled funds!",description:"You have unsettled royalties in your personal escrow account.",action:function(){var e=(0,k.Z)(g().mark((function e(){var r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(n);case 3:if(!(r=e.sent)){e.next=11;break}return e.next=7,t.getAccountInfo(r);case 7:if(null===(i=e.sent)||void 0===i||!i.data.length){e.next=11;break}return e.next=11,W(t,n,r);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()})}({connection:h,wallet:x,notifications:m}),function(e){var t=e.connection,n=e.wallet,a=e.notifications,o=(0,i.useUserAccounts)().accountByMint,u=null===n||void 0===n?void 0:n.publicKey,l=(0,s.jq)().bidderPotsByAuctionAndBidder,p=(0,Q.xE)(Q.nM.Ended),d=(0,c.useState)({}),h=d[0],x=d[1];(0,c.useMemo)((function(){!function(){var e=(0,k.Z)(g().mark((function e(){var n,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p.filter((function(e){return u&&e.auctionManager.info.authority.equals(u)&&e.auction.info.ended()})).sort((function(e,t){var n,r;return((null===(n=t.auction.info.endedAt)||void 0===n?void 0:n.toNumber())||0)-((null===(r=e.auction.info.endedAt)||void 0===r?void 0:r.toNumber())||0)})),r=g().mark((function e(r){var i,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n[r],te[i.auctionManager.pubkey.toBase58()]){e.next=13;break}return te[i.auctionManager.pubkey.toBase58()]=!0,e.prev=3,e.next=6,t.getTokenAccountBalance(i.auctionManager.info.acceptPayment);case 6:(0===((a=e.sent).value.uiAmount||0)&&i.auction.info.bidState.bids.map((function(e){return e.amount.toNumber()})).reduce((function(e,t){return e+t}),0)>0||(a.value.uiAmount||0)>.01)&&x((function(e){return X(X({},e),{},(0,y.Z)({},i.auctionManager.pubkey.toBase58(),a.value.uiAmount||0))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})),i=0;case 3:if(!(i<n.length)){e.next=8;break}return e.delegateYield(r(i),"t0",5);case 5:i++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[p.length,u]),Object.keys(h).forEach((function(e){var i=p.find((function(t){return t.auctionManager.pubkey.toBase58()===e}));if(i){var s=(0,b.Z)(i.auction.info.bidState.bids).reverse().slice(0,i.auctionManager.info.settings.winningConfigs.length).reduce((function(e,t){return e[t.key.toBase58()]=!0,e}),{}),u=o.get(i.auction.info.tokenMint.toBase58()),c=i.auction.pubkey.toBase58(),d=Object.values(l).filter((function(e){return s[e.info.bidderAct.toBase58()]&&!e.info.emptied&&e.info.auctionAct.toBase58()===c}));(d.length||h[e]>0)&&a.push({id:e,title:"You have an ended auction that needs settling!",description:(0,r.jsxs)("span",{children:["One of your auctions ended and it has monies that can be claimed. For more detail,"," ",(0,r.jsx)(f.default,{href:"/auction/".concat(c,"/billing"),children:(0,r.jsx)("a",{children:"click here."})})]}),action:function(){var e=(0,k.Z)(g().mark((function e(){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,_.W)(t,n,i,d,null===u||void 0===u?void 0:u.pubkey,o);case 3:if(null===n||void 0===n||!n.publicKey){e.next=10;break}return e.next=6,$(n);case 6:if(!(r=e.sent)){e.next=10;break}return e.next=10,W(t,n,r);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()})}}))}({connection:h,wallet:x,notifications:m}),(0,c.useMemo)((function(){return Object.values(u).filter((function(e){return e.info.authority.toBase58()===w&&e.info.state!==i.VaultState.Deactivated&&e.info.tokenTypeCount>0}))}),[u,w]).forEach((function(e){m.push({id:e.pubkey.toBase58(),title:"You have items locked in a defective auction!",description:(0,r.jsx)("span",{children:"During an auction creation process that probably had some issues, you lost an item. Reclaim it now."}),action:function(){var t=(0,k.Z)(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q(h,x,e,l);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}()})})),p.filter((function(e){return e.auctionManager.info.authority.toBase58()===w})).forEach((function(e){m.push({id:e.auctionManager.pubkey.toBase58(),title:"You have items locked in a defective auction!",description:(0,r.jsx)("span",{children:"During an auction creation process that probably had some issues, you lost an item. Reclaim it now."}),action:function(){var t=(0,k.Z)(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O(h,x,e,v);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}()})})),(0,c.useMemo)((function(){return n.filter((function(e){var t,n;return e.info.data.creators&&((null===(t=a[e.info.updateAuthority.toBase58()])||void 0===t||null===(n=t.info)||void 0===n?void 0:n.activated)||(null===o||void 0===o?void 0:o.info.public))&&e.info.data.creators.find((function(e){return e.address.toBase58()===w&&!e.verified}))}))}),[n,a,w]).forEach((function(e){var t,n;m.push({id:e.pubkey.toBase58(),title:"You have a new artwork to approve!",description:(0,r.jsxs)("span",{children:[(null===(t=a[e.info.updateAuthority.toBase58()])||void 0===t||null===(n=t.info)||void 0===n?void 0:n.name)||e.pubkey.toBase58()," ","wants you to approve that you helped create their art"," ",(0,r.jsx)(f.default,{href:"/art/".concat(e.pubkey.toBase58()),children:(0,r.jsx)("a",{children:"here."})})]}),action:function(){var t=(0,k.Z)(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,z.v)(h,x,e.pubkey);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}()})})),d.filter((function(e){return e.auctionManager.info.authority.toBase58()===w})).forEach((function(e){m.push({id:e.auctionManager.pubkey.toBase58(),title:"You have an auction which is not started yet!",description:(0,r.jsx)("span",{children:"You can activate it now if you wish."}),action:function(){var t=(0,k.Z)(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,G.h)(h,x,e);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}()})}));var j=m.length?(0,r.jsx)("div",{style:{width:"300px"},children:(0,r.jsx)(S.ZP,{itemLayout:"vertical",size:"small",dataSource:m.slice(0,10),renderItem:function(e){return(0,r.jsx)(S.ZP.Item,{extra:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J,{id:e.id,action:e.action,icon:(0,r.jsx)(B.Z,{})}),e.dismiss&&(0,r.jsx)(J,{id:e.id,action:e.dismiss,icon:(0,r.jsx)(B.Z,{})})]}),children:(0,r.jsx)(S.ZP.Item.Meta,{title:(0,r.jsx)("span",{children:e.title}),description:(0,r.jsx)("span",{children:(0,r.jsx)("i",{children:e.description})})})})}})}):(0,r.jsx)("span",{children:"No notifications"}),Z=(0,r.jsx)(A.Z,{className:"noty-popover",placement:"bottomLeft",content:j,trigger:"click",children:(0,r.jsx)("h1",{className:"title",children:"M"})});return 0===m.length?Z:(0,r.jsx)(M.Z,{count:m.length,style:{backgroundColor:"white"},children:Z})}var re=n(96642),ie=n(58403),ae=function(){var e,t=(0,i.useWallet)().wallet,n=(0,s.jq)(),a=n.whitelistedCreatorsByCreator,o=n.store,u=(null===t||void 0===t||null===(e=t.publicKey)||void 0===e?void 0:e.toBase58())||"",l=(0,c.useMemo)((function(){var e,t;return o&&o.info&&(o.info.public||(null===(e=a[u])||void 0===e||null===(t=e.info)||void 0===t?void 0:t.activated))}),[u,a,o]);return(0,r.jsxs)(r.Fragment,{children:[l?(0,r.jsx)(f.default,{href:"/art/create",children:(0,r.jsx)(d.Z,{className:"app-btn",children:"Create"})}):null,(0,r.jsx)(f.default,{href:"/auction/create/0",children:(0,r.jsx)(d.Z,{className:"connector",type:"primary",children:"Sell"})})]})},se=function(e){var t=e.vertical,n=void 0!==t&&t,a=(0,i.useWallet)().connected;return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:n?"column":"row"},children:[(0,r.jsx)(f.default,{href:"/",children:(0,r.jsx)(d.Z,{className:"app-btn",children:"Explore"})}),(0,r.jsx)(f.default,{href:"/artworks",children:(0,r.jsx)(d.Z,{className:"app-btn",children:a?"My Items":"Artworks"})}),(0,r.jsx)(f.default,{href:"/artists",children:(0,r.jsx)(d.Z,{className:"app-btn",children:"Creators"})})]})},oe=function(){var e=(0,re.ZP)().width,t=(0,i.useWallet)().connected;return e<768?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(h.Z,{arrow:!0,placement:"bottomLeft",trigger:["click"],overlay:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(x.Z.Item,{children:(0,r.jsx)(f.default,{href:"/",children:(0,r.jsx)(d.Z,{className:"app-btn",children:"Explore"})})}),(0,r.jsx)(x.Z.Item,{children:(0,r.jsx)(f.default,{href:"/artworks",children:(0,r.jsx)(d.Z,{className:"app-btn",children:t?"My Items":"Artworks"})})}),(0,r.jsx)(x.Z.Item,{children:(0,r.jsx)(f.default,{href:"/artists",children:(0,r.jsx)(d.Z,{className:"app-btn",children:"Creators"})})})]}),children:(0,r.jsx)(ie.Z,{style:{fontSize:"1.4rem"}})})}):(0,r.jsx)(se,{})},ue=function(){var e=(0,i.useWallet)().connected;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"app-left app-bar-box",children:[(0,r.jsx)(ne,{}),(0,r.jsx)("div",{className:"divider"}),(0,r.jsx)(oe,{})]}),!e&&(0,r.jsx)(i.ConnectButton,{type:"primary"}),e&&(0,r.jsxs)("div",{className:"app-right app-bar-box",children:[(0,r.jsx)(ae,{}),(0,r.jsx)(i.CurrentUserBadge,{showBalance:!1,showAddress:!1,iconSize:24})]})]})},ce=l.Z.Header,le=l.Z.Content,pe=function(e){return e<=768?"5px 10px":e>768?"10px 30px":void 0},fe=c.memo((function(e){var t=(0,re.ZP)().width;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.Z,{title:p.wS.APP_TITLE,style:{padding:pe(t),maxWidth:1e3},children:[(0,r.jsx)(ce,{className:"App-Bar",children:(0,r.jsx)(ue,{})}),(0,r.jsx)(le,{style:{overflow:"scroll",paddingBottom:50},children:e.children})]})})})),de=i.contexts.Wallet.WalletProvider,he=i.contexts.Connection.ConnectionProvider,xe=i.contexts.Accounts.AccountsProvider,be=function(e){var t=e.children,n=e.accounts;return(0,r.jsx)(he,{storeId:"CduMjFZLBeg3A9wMP3hQCoU1RQzzCpgSvQNXfCi1GCSB",children:(0,r.jsx)(de,{children:(0,r.jsx)(a.U,{chainId:5,children:(0,r.jsx)(xe,{children:(0,r.jsx)(o.Gm,{children:(0,r.jsx)(s.eV,{initAccounts:n,children:(0,r.jsx)(u.Im,{children:(0,r.jsx)(fe,{children:t})})})})})})})})}}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5382],{96642:function(e,t,n){"use strict";n.d(t,{ZP:function(){return a}});var i=n(10722),r=n(2784);n(71800),n(13550),n(83742),n(48834).Buffer;function o(){var e=[window.innerWidth,window.innerHeight],t=(0,i.Z)(e,2);return{width:t[0],height:t[1]}}function a(){var e=(0,r.useState)(o()),t=e[0],n=e[1];return(0,r.useEffect)((function(){function e(){n(o())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}},68834:function(e,t,n){"use strict";n.r(t),n.d(t,{AuctionItem:function(){return S},AuctionView:function(){return A},AuctionBids:function(){return P}});var i=n(77243),r=n(92847),o=n.n(r),a=n(10722),s=n(76588),c=n(52322),l=n(32113),d=n(2784),u=n(5632),h=n(3306),p=n(3086),f=n(62754),v=n(80318),x=n(24832),m=n(93977),j=n(57836),g=n(35590),y=n(69819),b=n(40898),w=n(96642),k=n(87532),Z=n(55687);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.item,n=e.index,i=e.size,r=e.active,o=t.metadata.pubkey,a={transform:0===n?"":"translate(".concat(15*n,"px, ").concat(-40*n,"px) scale(").concat(Math.max(1-.2*n,0),")"),transformOrigin:"right bottom",position:0!==n?"absolute":"static",zIndex:-1*n,marginLeft:i>1&&0===n?"0px":"auto",background:"black",boxShadow:"rgb(0 0 0 / 10%) 12px 2px 20px 14px",height:300};return(0,c.jsx)(g.$,{pubkey:o,className:"artwork-image stack-item",style:a,active:r,allowMeshRender:!0})},A=function(){var e=(0,u.useRouter)().query.id,t=(0,y.useConnectionConfig)().env,n=(0,j.Xk)(e),i=(0,d.useState)(0),r=i[0],o=i[1],a=(0,j.fV)(null===n||void 0===n?void 0:n.thumbnail.metadata.pubkey),s=(0,j.d6)(null===n||void 0===n?void 0:n.thumbnail.metadata.pubkey),g=s.ref,b=s.data,w=((0,j.nE)(n),"");a.type===Z.G.NFT?w="Unique":a.type===Z.G.Master?w="NFT 0":a.type===Z.G.Print&&(w="".concat(a.edition," of ").concat(a.supply));var k=null===n||void 0===n?void 0:n.items.flat().length,O=null===n||void 0===n?void 0:n.items.length,N=void 0===b||void 0===b.description,A=null===b||void 0===b?void 0:b.description,C=[].concat((0,l.Z)((null===n||void 0===n?void 0:n.items.flat().reduce((function(e,t){return e.set(t.metadata.pubkey.toBase58(),t),e}),new Map).values())||[]),[null===n||void 0===n?void 0:n.participationItem]).map((function(e,t,n){var i;return e&&null!==e&&void 0!==e&&e.metadata&&null!==(i=e.metadata)&&void 0!==i&&i.pubkey?(0,c.jsx)(S,{item:e,index:t,size:n.length,active:t===r},e.metadata.pubkey.toBase58()):null}));return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(h.Z,{justify:"space-around",ref:g,children:[(0,c.jsxs)(p.Z,{span:24,md:12,className:"pr-4",children:[(0,c.jsx)("div",{className:"auction-view",style:{minHeight:300},children:(0,c.jsx)(f.Z,{autoplay:!1,afterChange:function(e){return o(e)},children:C})}),(0,c.jsx)("h6",{children:"Number Of Winners"}),(0,c.jsx)("h1",{children:void 0===O?(0,c.jsx)(v.Z,{paragraph:{rows:0}}):O}),(0,c.jsx)("h6",{children:"Number Of NFTs"}),(0,c.jsx)("h1",{children:void 0===k?(0,c.jsx)(v.Z,{paragraph:{rows:0}}):k}),(0,c.jsxs)("h6",{children:["About this ",1===k?"NFT":"Collection"]}),(0,c.jsxs)("div",{className:"auction-paragraph",children:[N&&(0,c.jsx)(v.Z,{paragraph:{rows:3}}),A||void 0!==O&&(0,c.jsx)("div",{style:{fontStyle:"italic"},children:"No description provided."})]})]}),(0,c.jsxs)(p.Z,{span:24,md:12,children:[(0,c.jsx)("h2",{className:"art-title",children:a.title||(0,c.jsx)(v.Z,{paragraph:{rows:0}})}),(0,c.jsxs)(h.Z,{gutter:[50,0],style:{marginRight:"unset"},children:[(0,c.jsxs)(p.Z,{children:[(0,c.jsx)("h6",{children:"Edition"}),!n&&(0,c.jsx)(v.Z,{title:{width:"100%"},paragraph:{rows:0}}),n&&(0,c.jsx)("p",{className:"auction-art-edition",children:((null===n||void 0===n?void 0:n.items.length)||0)>1?"Multiple":w})]}),(0,c.jsxs)(p.Z,{children:[(0,c.jsx)("h6",{children:"View on"}),(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)(x.Z,{className:"tag",onClick:function(){return window.open(a.uri||"","_blank")},children:"Arweave"}),(0,c.jsx)(x.Z,{className:"tag",onClick:function(){return window.open("https://explorer.solana.com/account/".concat((null===a||void 0===a?void 0:a.mint)||"").concat(t.indexOf("main")>=0?"":"?cluster=".concat(t)),"_blank")},children:"Solana"})]})]})]}),!n&&(0,c.jsx)(v.Z,{paragraph:{rows:6}}),n&&(0,c.jsx)(m.W,{auctionView:n}),(0,c.jsx)(P,{auctionView:n})]})]})})};t.default=A;var C=function(e){var t,n=e.bid,i=e.index,r=e.mint,l=e.isCancelled,u=e.isActive,f=(0,y.useWallet)().wallet,v=n.info.bidderPubkey.toBase58(),x=(null===f||void 0===f||null===(t=f.publicKey)||void 0===t?void 0:t.toBase58())===v,m=(0,y.useConnection)(),j=(0,d.useState)(""),g=j[0],w=j[1];return(0,d.useEffect)((function(){(function(){var e=(0,s.Z)(o().mark((function e(t,n){var i,r,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.getHandleAndRegistryKey)(t,n);case 3:i=e.sent,r=(0,a.Z)(i,1),s=r[0],w(s),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),console.warn("err"),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}})()(m,v)}),[g]),(0,c.jsxs)(h.Z,{style:N({width:"100%",alignItems:"center",padding:"3px 0",position:"relative",opacity:u?void 0:.5},x?{backgroundColor:"#ffffff21"}:{}),children:[l&&(0,c.jsx)("div",{style:{position:"absolute",left:0,width:"100%",height:1,background:"grey",top:"calc(50% - 1px)",zIndex:2}}),(0,c.jsx)(p.Z,{span:2,style:{textAlign:"right",paddingRight:10},children:!l&&(0,c.jsxs)("div",{style:{opacity:.8,fontWeight:700},children:[x&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(k.Z,{}),"\xa0"]}),i+1]})}),(0,c.jsx)(p.Z,{span:16,children:(0,c.jsxs)(h.Z,{children:[(0,c.jsx)(y.Identicon,{style:{width:24,height:24,marginRight:10,marginTop:2},address:v})," ",g?(0,c.jsx)("a",{target:"_blank",title:(0,y.shortenAddress)(v),href:"https://twitter.com/".concat(g),children:"@".concat(g)}):(0,y.shortenAddress)(v),x&&(0,c.jsx)("span",{style:{color:"#6479f6"},children:"\xa0(you)"})]})}),(0,c.jsx)(p.Z,{span:6,style:{textAlign:"right"},children:(0,c.jsxs)("span",{title:(0,y.fromLamports)(n.info.lastBid,r).toString(),children:["\u25ce",(0,y.formatTokenAmount)(n.info.lastBid,r)]})})]})},P=function(e){var t=e.auctionView,n=(0,j.hc)((null===t||void 0===t?void 0:t.auction.pubkey)||""),i=(0,y.useMint)(null===t||void 0===t?void 0:t.auction.info.tokenMint),r=(0,w.ZP)().width,o=(0,d.useState)(!1),a=o[0],s=o[1],l=(null===t||void 0===t?void 0:t.auction.info.bidState.max.toNumber())||0,u=(null===t||void 0===t?void 0:t.auction.info.bidState.bids)||[],h=(0,d.useMemo)((function(){return new Set(u.map((function(e){return e.key.toBase58()})))}),[u]),f=t?t.auction.info.state:y.AuctionState.Created,v=(0,d.useMemo)((function(){var e=0;return n.map((function(t,n){var r=n<l&&!!t.info.cancelled||f!==y.AuctionState.Ended&&!!t.info.cancelled,o=(0,c.jsx)(C,{bid:t,index:e,mint:i,isCancelled:r,isActive:!t.info.cancelled},n);return r||e++,o}))}),[f,n,h]);return!t||n.length<1?null:(0,c.jsxs)(p.Z,{style:{width:"100%"},children:[(0,c.jsx)("h6",{children:"Bid History"}),v.slice(0,10),n.length>10&&(0,c.jsx)("div",{className:"full-history",onClick:function(){return s(!0)},style:{cursor:"pointer"},children:"View full history"}),(0,c.jsx)(y.MetaplexModal,{visible:a,onCancel:function(){return s(!1)},title:"Bid history",bodyStyle:{background:"unset",boxShadow:"unset",borderRadius:0},centered:!0,width:r<768?r-10:600,children:(0,c.jsx)("div",{style:{maxHeight:600,overflowY:"scroll",width:"100%"},children:v})})]})}},80185:function(){}}]);